<template>
  <div class="basic-example">
    <l-map :zoom="zoom" :center="center">
      <l-tile-layer :url="url"></l-tile-layer>
      <Vue2LeafletHeatmap
        v-show="haveReports"
        :lat-lng="reportPoints"
        :radius="60"
        :min-opacity="0.75"
        :max-zoom="10"
        :blur="60"
      ></Vue2LeafletHeatmap>
    </l-map>
  </div>
</template>

<script>
import { LMap, LTileLayer } from "vue2-leaflet";
import Vue2LeafletHeatmap from "vue2-leaflet-heatmap";

export default {
  components: {
    LMap,
    LTileLayer,
    Vue2LeafletHeatmap
  },
  data() {
    return {
      url: "https://{s}.tile.osm.org/{z}/{x}/{y}.png",
      zoom: 16,
      center: [40.73061, -73.935242],
      reports: [{"id":1,"event_name":"דקירה במקדונלס","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-06T00:00:00.000Z","report_time":"2021-06-06T00:00:00.000Z","user_name":"גלי גרשטיין","lat":54,"lon":23,"region":null,"criminal":"משה הדוקר","report_id":1,"weapon_type":"מברג","casualties":"משה כהן, מנחם לוי"},{"id":9,"event_name":"tytytyty","event_description":null,"event_id":1,"event_type":"ירי","event_time":"2021-06-23T21:00:00.000Z","report_time":"2021-06-29T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7319983769566,"lon":-73.9363789546116,"region":"ברוקלין","criminal":"gdfgd","report_id":9,"weapon_type":"dsfd","casualties":"ירי"},{"id":10,"event_name":"tytytyty","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-27T21:00:00.000Z","report_time":"2021-06-28T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7306818075672,"lon":-73.9345979677001,"region":"מנהטן","criminal":"ניר","report_id":10,"weapon_type":"dsfd","casualties":"ירי"},{"id":11,"event_name":"אירוע חטיפה","event_description":null,"event_id":3,"event_type":"חטיפה","event_time":"2021-06-28T21:00:00.000Z","report_time":"2021-06-20T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7345976559954,"lon":-73.9292979240418,"region":"מנהטן","criminal":"גכגכגכ","report_id":11,"kidnapped":"dfdfd","last_place_known":"ניו יורק"},{"id":13,"event_name":"tytytyty","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-20T21:00:00.000Z","report_time":"2021-06-17T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.784391851743,"lon":-74.3080901927126,"region":"מנהטן","criminal":"ניר","report_id":13,"weapon_type":"dsfd","casualties":"ירי"},{"id":14,"event_name":"tytytyty","event_description":null,"event_id":3,"event_type":"חטיפה","event_time":"2021-06-20T21:00:00.000Z","report_time":"2021-06-15T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.6647953368207,"lon":-74.2263793715174,"region":"סטייטן איילנד","criminal":"שדג","report_id":14,"kidnapped":"שדג","last_place_known":"ניו יורק"},{"id":16,"event_name":"jjjj","event_description":null,"event_id":4,"event_type":"תאונה","event_time":"2021-06-29T21:00:00.000Z","report_time":"2021-06-27T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7320303818235,"lon":-73.9290404302291,"region":"קווינס","criminal":"hjhjh","report_id":16,"casualties":"hjh","number_of_casualties":5},{"id":18,"event_name":"אירוע חטיפה","event_description":null,"event_id":4,"event_type":"תאונה","event_time":"2021-07-07T21:00:00.000Z","report_time":"2021-06-27T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7329801139505,"lon":-73.9316582679749,"region":"מנהטן","criminal":"ניר הלל","report_id":18,"casualties":"עילי גולדשטיין","number_of_casualties":5},{"id":19,"event_name":"ירי","event_description":null,"event_id":1,"event_type":"ירי","event_time":null,"report_time":"2021-06-09T13:48:45.281Z","user_name":"גלי גרשטיין","lat":31.9742736816406,"lon":34.7705892245144,"region":null,"criminal":null,"report_id":19,"weapon_type":"M16(long)","casualties":"כל המדור מסתבר"},{"id":22,"event_name":"דקירה במקדונלס","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-03T00:00:00.000Z","report_time":"2021-06-03T00:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7319983769566,"lon":-73.9363789546116,"region":null,"criminal":"משה הדוקר"},{"id":25,"event_name":"דקירה במקדונלס","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-04T00:00:00.000Z","report_time":"2021-06-04T00:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7319983769566,"lon":-73.9363789546116,"region":null,"criminal":"משה הדוקר"},{"id":26,"event_name":"דקירה במקדונלס","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-05T00:00:00.000Z","report_time":"2021-06-05T00:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7319983769566,"lon":-73.9363789546116,"region":null,"criminal":"משה הדוקר"},{"id":27,"event_name":"דקירה במקדונלס","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-06T00:00:00.000Z","report_time":"2021-06-06T00:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7319983769566,"lon":-73.9363789546116,"region":null,"criminal":"משה הדוקר"},{"id":28,"event_name":"דקירה במקדונלס","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-07T00:00:00.000Z","report_time":"2021-06-07T00:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7319983769566,"lon":-73.9363789546116,"region":null,"criminal":"משה הדוקר"},{"id":29,"event_name":"דקירה במקדונלס","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-08T00:00:00.000Z","report_time":"2021-06-08T00:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7319983769566,"lon":-73.9363789546116,"region":null,"criminal":"משה הדוקר"},{"id":30,"event_name":"דקירה במקדונלס","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-08T00:00:00.000Z","report_time":"2021-06-08T00:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7319983769566,"lon":-73.9363789546116,"region":null,"criminal":"משה הדוקר"},{"id":31,"event_name":"דקירה במקדונלס","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-08T00:00:00.000Z","report_time":"2021-06-08T00:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7319983769566,"lon":-73.9363789546116,"region":null,"criminal":"משה הדוקר"},{"id":32,"event_name":"דקירה במקדונלס","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-09T00:00:00.000Z","report_time":"2021-06-09T00:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7319983769566,"lon":-73.9363789546116,"region":null,"criminal":"משה הדוקר"},{"id":33,"event_name":"דקירה במקדונלס","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-09T00:00:00.000Z","report_time":"2021-06-09T00:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7319983769566,"lon":-73.9363789546116,"region":null,"criminal":"משה הדוקר"},{"id":34,"event_name":"דקירה במקדונלס","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-09T00:00:00.000Z","report_time":"2021-06-09T00:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7319983769566,"lon":-73.9363789546116,"region":null,"criminal":"משה הדוקר"},{"id":35,"event_name":"דקירה במקדונלס","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-09T00:00:00.000Z","report_time":"2021-06-09T00:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7319983769566,"lon":-73.9363789546116,"region":null,"criminal":"משה הדוקר"},{"id":36,"event_name":"דקירה במקדונלס","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-09T00:00:00.000Z","report_time":"2021-06-09T00:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7319983769566,"lon":-73.9363789546116,"region":null,"criminal":"משה הדוקר"},{"id":37,"event_name":"ירי","event_description":null,"event_id":1,"event_type":"ירי","event_time":null,"report_time":"2021-06-09T13:54:43.870Z","user_name":"גייק פרלטה","lat":31.9684608,"lon":34.766848,"region":"קווינס","criminal":"וובה","report_id":37,"weapon_type":"רובה","casualties":"1"},{"id":42,"event_name":"tytytyty","event_description":null,"event_id":1,"event_type":"ירי","event_time":"2021-06-21T21:00:00.000Z","report_time":"2021-06-21T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7511933702024,"lon":-73.8689803968741,"region":"מנהטן","criminal":"gdfgd","report_id":42,"weapon_type":"dsfd","casualties":"ירי"},{"id":48,"event_name":"tytytyty","event_description":null,"event_id":1,"event_type":"ירי","event_time":"2021-06-24T21:00:00.000Z","report_time":"2021-06-21T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7633414134148,"lon":-73.9822769165039,"region":"קווינס","criminal":"הלל","report_id":48,"weapon_type":"dsfd","casualties":"ירי"},{"id":50,"event_name":"tytytyty","event_description":null,"event_id":1,"event_type":"ירי","event_time":"2021-06-21T21:00:00.000Z","report_time":"2021-06-28T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7311692471995,"lon":-73.9420008651036,"region":"מנהטן","criminal":"gdfgd","report_id":50,"weapon_type":"dsfd","casualties":"ירי"},{"id":51,"event_name":"tytytyty","event_description":null,"event_id":1,"event_type":"ירי","event_time":"2021-06-22T21:00:00.000Z","report_time":"2021-06-21T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7358322392012,"lon":-73.9401984205184,"region":"ברוקלין","criminal":"gdfgd","report_id":51,"weapon_type":"dsfd","casualties":"ירי"},{"id":52,"event_name":"tytytyty","event_description":null,"event_id":1,"event_type":"ירי","event_time":"2021-06-30T21:00:00.000Z","report_time":"2021-06-22T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7280628136594,"lon":-73.9378380764187,"region":"ברוקלין","criminal":"gdfgd","report_id":52,"weapon_type":"dsfd","casualties":"ירי"},{"id":53,"event_name":"תאונה","event_description":null,"event_id":4,"event_type":"תאונה","event_time":null,"report_time":"2021-06-09T14:32:43.757Z","user_name":"גלי גרשטיין","lat":0,"lon":34.77058410272,"region":"סטייטן איילנד","criminal":"Hhhjhjhbhhhhhgghvvvvbvvvhhhhh","report_id":53,"casualties":"יותם","number_of_casualties":3},{"id":54,"event_name":"חטיפה","event_description":null,"event_id":3,"event_type":"חטיפה","event_time":null,"report_time":"2021-06-09T14:34:09.324Z","user_name":"גלי גרשטיין","lat":0,"lon":34.77058410272,"region":"קווינס","criminal":null},{"id":58,"event_name":"jjjj","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-29T21:00:00.000Z","report_time":"2021-07-06T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7289084915228,"lon":-73.942322730208,"region":"ברוקלין","criminal":"ניר","report_id":58,"weapon_type":"dsfd","casualties":"ירי"},{"id":61,"event_name":"tytytyty","event_description":null,"event_id":4,"event_type":"תאונה","event_time":"2021-06-28T21:00:00.000Z","report_time":"2021-06-29T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7328114808549,"lon":-73.9485669132353,"region":"ברוקלין","criminal":"hghgh","report_id":61,"casualties":"gjhghhg","number_of_casualties":1},{"id":64,"event_name":"תאונה","event_description":null,"event_id":4,"event_type":"תאונה","event_time":null,"report_time":"2021-06-09T16:33:48.144Z","user_name":"גלי גרשטיין","lat":31.9700622558594,"lon":34.771451200905,"region":"סטייטן איילנד","criminal":null},{"id":65,"event_name":"תאונה","event_description":null,"event_id":4,"event_type":"תאונה","event_time":null,"report_time":"2021-06-09T16:47:16.358Z","user_name":"גלי גרשטיין","lat":31.9700622558594,"lon":34.7713902236468,"region":"ברונקס","criminal":null},{"id":66,"event_name":"תאונה","event_description":null,"event_id":4,"event_type":"תאונה","event_time":null,"report_time":"2021-06-09T19:41:11.288Z","user_name":"גלי גרשטיין","lat":31.967041015625,"lon":34.8488371633318,"region":"סטייטן איילנד","criminal":"טוו","report_id":66,"casualties":"אוראל","number_of_casualties":2},{"id":67,"event_name":"תאונה","event_description":null,"event_id":4,"event_type":"תאונה","event_time":null,"report_time":"2021-06-10T06:14:09.196Z","user_name":"גלי גרשטיין","lat":31.9741363525391,"lon":34.7709752208986,"region":"מנהטן","criminal":null},{"id":68,"event_name":"תאונה","event_description":null,"event_id":4,"event_type":"תאונה","event_time":null,"report_time":"2021-06-10T06:15:20.896Z","user_name":"גלי גרשטיין","lat":31.9649810791016,"lon":34.7759472885114,"region":null,"criminal":null},{"id":69,"event_name":"תאונה","event_description":null,"event_id":4,"event_type":"תאונה","event_time":"2021-05-05T06:15:00.000Z","report_time":"2021-06-10T06:15:42.556Z","user_name":"גלי גרשטיין","lat":31.9648895263672,"lon":34.7759989986782,"region":"מנהטן","criminal":null},{"id":70,"event_name":"דקירה","event_description":null,"event_id":2,"event_type":"דקירה","event_time":"2021-06-21T06:19:00.000Z","report_time":"2021-06-10T06:19:42.938Z","user_name":"גלי גרשטיין","lat":31.9700622558594,"lon":34.7715286542105,"region":"ברוקלין","criminal":null,"report_id":70,"weapon_type":null,"casualties":"אתה"},{"id":71,"event_name":"tytytyty","event_description":null,"event_id":1,"event_type":"ירי","event_time":"2021-06-29T21:00:00.000Z","report_time":"2021-07-04T21:00:00.000Z","user_name":"גלי גרשטיין","lat":40.7307299150342,"lon":-73.9466142649347,"region":"מנהטן","criminal":"gdfgd","report_id":71,"weapon_type":"dsfd","casualties":"ירי"},{"id":72,"event_name":"תאונה","event_description":null,"event_id":5,"event_type":"הפרת בידוד","event_time":"2021-06-10T06:36:09.805Z","report_time":"2021-06-10T06:36:09.805Z","user_name":"גייק פרלטה","lat":31.9698638916016,"lon":34.7720485429758,"region":"מנהטן","criminal":"וובה","report_id":72,"criminal_id":22225555,"insulation_start":"2021-06-18T00:00:00.000Z"}],
      haveReports: false,
      reportServerUrl:
        "http://siton-backend-securityapp3.apps.openforce.openforce.biz/reports"
    };
  },
  computed: {
    reportPoints: function() {
      const points = [];

      this.reports.forEach(report => {
        points.push([report.lat, report.lon, 0.5]);
      });

      return points;
    }
  },
  methods: {
    getReports: function() {}
  }
};
</script>

<style>
.basic-example {
  height: 85vh;
  direction: rtl;
}
</style>
